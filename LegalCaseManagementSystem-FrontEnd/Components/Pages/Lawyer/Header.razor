@using LegalCaseManagementSystem_FrontEnd.Services
@inject DashboardState DashboardState
@inject IJSRuntime JSRuntime

<header class="dashboard-header">
    <div class="header-left">
        <h1>CounselConnect <span class="badge">PRO</span></h1>
        <p class="text-muted">Your legal practice dashboard</p>
    </div>
    <div class="header-right">
        <button class="btn btn-icon" @onclick="ToggleDarkMode">
            <i class="fas @(DashboardState.IsDarkMode ? "fa-sun" : "fa-moon")"></i>
        </button>
        <div class="user-dropdown">
            <img src="https://ui-avatars.com/api/?name=@(DashboardState.LawyerName ?? "Lawyer")&background=4e73df&color=fff"
                 class="user-avatar" />
            <div class="dropdown-content">
                <a href="#"><i class="fas fa-user"></i> Profile</a>
                <a href="#"><i class="fas fa-cog"></i> Settings</a>
                <a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>
    </div>
</header>

@code {
    private async Task ToggleDarkMode()
    {
        DashboardState.IsDarkMode = !DashboardState.IsDarkMode;
        DashboardState.NotifyStateChanged();
        await JSRuntime.InvokeVoidAsync("updateTheme", DashboardState.IsDarkMode);
    }
}